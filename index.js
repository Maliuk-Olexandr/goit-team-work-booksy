import{S as $,a as X,A as Z,i as p}from"./assets/vendor-DlTilzpZ.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function o(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerPolicy&&(r.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?r.credentials="include":n.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(n){if(n.ep)return;n.ep=!0;const r=o(n);fetch(n.href,r)}})();const i={mobMenu:document.querySelector(".mobile-menu"),body:document.body};let v=!1;const q=t=>{if(v)return;v=!0,i.mobMenu.classList.toggle("is-open",t),i.body.classList.toggle("no-scroll",t);const e=o=>{o.target===i.mobMenu&&(v=!1,i.mobMenu.removeEventListener("transitionend",e))};i.mobMenu.addEventListener("transitionend",e)};document.addEventListener("click",t=>{t.target.closest("[data-menu-open]")?q(!0):t.target.closest("[data-menu-close], .mobile-link")&&q(!1)});function j(t,e){let o;return(...s)=>{clearTimeout(o),o=setTimeout(()=>t(...s),e)}}function ee({containerSelector:t,prevSelector:e,nextSelector:o}){const s=document.querySelector(t);if(!s){console.warn(`Swiper контейнер ${t} не знайдено`);return}const n=document.querySelector(e),r=document.querySelector(o),a=new $(s,{loop:!1,effect:"slide",parallax:!0,navigation:{nextEl:r,prevEl:n},autoplay:{delay:1e4,disableOnInteraction:!0,pauseOnMouseEnter:!0},keyboard:{enabled:!0,onlyInViewport:!0},slidesPerView:1,slidesPerGroup:1,on:{init(l){M(l)},slideChange(l){M(l)}}});function M(l){!n||!r||(n.disabled=l.isBeginning,r.disabled=l.isEnd,n.classList.toggle("disabled",l.isBeginning),r.classList.toggle("disabled",l.isEnd))}return[n,r].forEach(l=>{l&&l.addEventListener("click",()=>{l.blur()})}),a}const te={containerSelector:".swiper",prevSelector:".hero-swiper-btn-prev",nextSelector:".hero-swiper-btn-next"};ee(te);document.querySelectorAll('.slide-btn[href="#books"]').forEach(t=>{t.addEventListener("click",e=>{e.preventDefault(),document.querySelector("#books")?.scrollIntoView()})});const oe="https://books-backend.p.goit.global/books",ne=X.create({baseURL:oe});async function y(t=""){try{const{data:e}=await ne.get(t);return e}catch(e){throw console.error("Error fetching data:",e.message),e}}async function N(){return(await y("/category-list")).map(e=>e.list_name)}async function L(){return await y("/top-books")}async function H(t){if(!t){const e=new Error("Valid category must be provided.");throw console.error(e),e}return await y(`/category?category=${t}`)}async function V(t){if(!t){const e=new Error("Valid book ID must be provided.");throw console.error(e),e}return await y(`/${t}`)}async function se(){try{const t=await N(),e=await L(),o=await H(t[0]),s=o[0]._id;console.log("\x1B[32mtestAPI() start ------------\x1B[0m"),console.log("\x1B[32m1. getCategoryList():\x1B[0m",t),console.log("\x1B[32m2. getTopBooks():\x1B[0m",e),console.log(`\x1B[32m3. getBooksByCategory('${t[0]}'):\x1B[0m`,o),console.log(`\x1B[32m4. getBookByID("${s}"):`,await V(s)),console.log("\x1B[32mtestAPI() end ------------\x1B[\x1B[0m")}catch(t){console.error("API test failed:",t)}}Object.assign(i,{bookModal_img:document.querySelector(".modal-books_img"),bookModal_title:document.querySelector(".modal-books_title"),bookModal_author:document.querySelector(".modal-books_author"),bookModal_price:document.querySelector(".modal-books_price"),bookModal_details:document.querySelector('[data-ac="details"]'),bookModal_returns:document.querySelector('[data-ac="returns"]'),bookModal_shipping:document.querySelector('[data-ac="shipping"]'),bookModal_data:document.querySelector(".modal-books_data"),bookModal_quantity:document.querySelector("#bookQuantity")});function re(t){i.bookModal_data.dataset.bookId=t.bookId,i.bookModal_img.src=t.bookPicture,i.bookModal_img.alt=t.bookTitle,i.bookModal_title.textContent=t.bookTitle,i.bookModal_quantity.value=t.bookQuantity,i.bookModal_author.textContent=t.bookAuthor,i.bookModal_price.textContent="$"+t.bookPrice,i.bookModal_details.textContent=t.details,i.bookModal_shipping.textContent=t.shipping,i.bookModal_returns.textContent=t.returns}const F="shopping_cart";function ie(t,e){if(!t||e<=0)return console.warn("Wrong parameters, can't add to cart"),!1;const o=O(),s=o[t]||0;return o[t]=Number(s)+Number(e),le(o)}function ae(t){if(!t)return 0;const e=O();return Number(e[t])||0}function O(){try{const t=localStorage.getItem(F);return t?JSON.parse(t):{}}catch(t){return console.error("Cart data getting error:",t),{}}}function le(t){try{return localStorage.setItem(F,JSON.stringify(t)),!0}catch(e){return console.error("Cart saving error:",e),!1}}const w={details:"I Will Find You is a gripping thriller by the master of suspense, Harlan Coben. The story follows David Burroughs, a former prisoner wrongfully convicted of murdering his own son. When he discovers a clue suggesting his son might still be alive, David escapes from prison to uncover the truth. Fast-paced, emotional, and full of unexpected twists — this novel will keep you hooked until the very last page.",shipping:"We ship across the United States within 2–5 business days. All orders are processed through USPS or a reliable courier service. Enjoy free standard shipping on orders over $50.",returns:"You can return an item within 14 days of receiving your order, provided it hasn’t been used and is in its original condition. To start a return, please contact our support team — we’ll guide you through the process quickly and hassle-free."},B=new Z(document.querySelector(".accordion-container"),{showMultiple:!0,duration:400,collapse:!0});class W{constructor(e){if(!e)throw new Error("Modal Element not found");this.modalElement=e,this.escapeHandler=this.handleEscape.bind(this),this.closeClickHandler=this.handleCloseClick.bind(this)}open(){this.modalElement.classList.add("is-open"),document.body.style.overflow="hidden",document.addEventListener("keydown",this.escapeHandler),this.modalElement.addEventListener("click",this.closeClickHandler)}close(){this.modalElement.classList.remove("is-open"),document.body.style.overflow="",document.removeEventListener("keydown",this.escapeHandler),this.modalElement.removeEventListener("click",this.closeClickHandler)}handleEscape(e){e.key==="Escape"&&this.close()}handleCloseClick(e){const o=this.modalElement.querySelector(".modal_close-btn"),s=o&&o.contains(e.target),n=e.target===this.modalElement;(s||n)&&this.close()}}class ce extends W{constructor(e){if(super(e),this.form=this.modalElement.querySelector("#contactForm"),this.nameInput=this.form.querySelector("#user_name"),this.emailInput=this.form.querySelector("#user_email"),this.messageInput=this.form.querySelector("#user_message"),this.nameErrorContainer=this.form.querySelector(".contact-form-name .validation-error"),this.emailErrorContainer=this.form.querySelector(".contact-form-email .validation-error"),this.messageErrorContainer=this.form.querySelector(".contact-form-message .validation-error"),!this.form)throw new Error("Contact form not found in the modal");this.submitHandler=this.handleSubmit.bind(this),this.handleNameInput=this.clearErrorContainer.bind(this,this.nameInput,this.nameErrorContainer),this.handleEmailInput=this.clearErrorContainer.bind(this,this.emailInput,this.emailErrorContainer),this.handleMessageInput=this.clearErrorContainer.bind(this,this.messageInput,this.messageErrorContainer)}clearErrorContainer(e,o){e.classList.remove("invalid"),o.innerText=""}open(){super.open(),this.form.addEventListener("submit",this.submitHandler),this.nameInput.addEventListener("focus",this.handleNameInput),this.emailInput.addEventListener("focus",this.handleEmailInput),this.messageInput.addEventListener("focus",this.handleMessageInput)}close(){super.close(),this.form.removeEventListener("submit",this.submitHandler),this.nameInput.removeEventListener("focus",this.handleNameInput),this.emailInput.removeEventListener("focus",this.handleEmailInput),this.messageInput.removeEventListener("focus",this.handleMessageInput),this.form.reset()}validate(){const e=[],o={name:"❌ Please enter valid Name",email:{valid:"❌ Please enter valid Email",required:"❌ Email is a required field"},message:"❌ Message can not be empty"};this.nameInput.classList.remove("invalid"),this.emailInput.classList.remove("invalid"),this.messageInput.classList.remove("invalid"),this.nameInput.value.trim()===""&&(e.push(o.name),this.nameInput.classList.add("invalid"),this.nameErrorContainer.innerText=o.name);const s=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;return this.emailInput.value.trim()===""?(e.push(o.email.required),this.emailInput.classList.add("invalid"),this.emailErrorContainer.innerText=o.email.required):s.test(this.emailInput.value)||(e.push(o.email.valid),this.emailInput.classList.add("invalid"),this.emailErrorContainer.innerText=o.email.valid),this.messageInput.value.trim()===""&&(e.push(o.message),this.messageInput.classList.add("invalid"),this.messageErrorContainer.innerText=o.message),e}async handleSubmit(e){e.preventDefault();const o=new FormData(this.form),s=Object.fromEntries(o.entries());if(!(this.validate().length>0))try{await this.submitForm(s),p.show({position:"center",theme:"light",message:"❤︎ Your registration has been submitted."}),this.close()}catch(r){console.error("Form submission error:",r),p.show({position:"center",theme:"light",message:"✖ 'There was an error submitting your registration. Please try again.'"})}}async submitForm(e){console.log("Submitting form data:",e)}}class de extends W{constructor(e){super(e),this.eventHandler=this.handleEvents.bind(this)}async open(e){try{const o=await V(e),s=this.prepareData(o);re(s),B&&B.closeAll(),super.open(),this.form=this.modalElement.querySelector("#bookModalActionForm"),this.form&&(this.form.addEventListener("click",this.eventHandler),this.form.addEventListener("submit",this.eventHandler))}catch(o){console.error(`Error loading book with ID ${e}:`,o),p.show({position:"center",theme:"light",message:"✖ 'Sorry, couldn't load the book details. Please try again later.'"})}}close(){super.close(),this.form&&(this.form.removeEventListener("click",this.eventHandler),this.form.removeEventListener("submit",this.eventHandler))}prepareData(e){return{bookId:e._id,bookPicture:e.book_image,bookTitle:e.title,bookAuthor:e.author,bookPrice:e.price,bookQuantity:1,details:e.details||w.details,shipping:e.shipping||w.shipping,returns:e.returns||w.returns}}handleEvents(e){e.preventDefault();const o=e.target;switch(o.dataset.action){case"decrease":this.updateQuantity(-1);break;case"increase":this.updateQuantity(1);break;case"add-to-cart":this.handleAddToCart(o);break;case"buy-now":this.handleBuyNow();break}e.type==="submit"&&this.handleBuyNow()}updateQuantity(e){const o=this.form.querySelector(".quantity-input"),n=parseInt(o.value)+e;n>=1&&(o.value=n)}handleAddToCart(e){const s=e.closest("[data-book-id]").dataset.bookId,n=parseInt(this.form.querySelector(".quantity-input").value);p.show({iconUrl:"/img/icons.svg",theme:"light",progressBar:!0,message:`Book (${n} pcs) added`,target:".modal-books_message-container",timeout:3e3,onOpening:function(r,a){x(a,"/img/icons.svg#icon-shopping-basket")}}),console.log(`Book with ID '${s}' (qty: ${n}) added to Cart.`),console.log(`Total ID '${s}' in Cart: ${ae(s)}`),ie(s,n)}handleBuyNow(){console.log('"Buy Now" clicked.'),p.show({iconUrl:"/img/icons.svg",position:"center",theme:"light",message:"Thanks for buying!",timeout:3e3,onOpening:function(e,o){x(o,"/img/icons.svg#icon-shopping-basket")}}),this.close()}}function x(t,e){const o=t.querySelector(".iziToast-icon");if(o){const s=document.createElementNS("http://www.w3.org/2000/svg","svg");s.setAttribute("class",`${o.getAttribute("class")} revealIn customIziToastIcon`),s.setAttribute("width","24"),s.setAttribute("height","24");const n=document.createElementNS("http://www.w3.org/2000/svg","use");n.setAttributeNS("http://www.w3.org/1999/xlink","href",e),s.appendChild(n),o.parentNode.replaceChild(s,o)}}const T=document.querySelector(".modal-contacts"),A=document.querySelector(".modal-books");let k,E;T&&(k=new ce(T));A&&(E=new de(A));function z(t="Children’s Story Hour"){k?(document.querySelector("#modalDesc").textContent=t,k.open()):console.error("Contact modal is not initialized.")}function U(t="660df41ba957e5c1ae0f519e"){E?E.open(t):console.error("Books modal is not initialized.")}window.openBooksModal=U;window.openContactsModal=z;const g=document.querySelector(".gallery"),m=document.querySelector("#category-select"),d=document.querySelector(".btn-show-more"),_=document.querySelector(".visible-books"),ue=document.querySelector(".total-books"),b=document.querySelector(".categories-list"),S=document.querySelector(".categories-arrow"),Y=document.querySelector(".loader");let c=[],u=0;function C(){Y.classList.remove("hidden")}function f(){Y.classList.add("hidden")}let D=window.innerWidth<768?"mobile":"desktop";C();const me=await N();pe(me);const he=await L();c=he.flatMap(({books:t})=>t);I();f();function pe(t){m.innerHTML='<option selected value="All categories">All categories</option>',b.innerHTML='<li><button class="category-btn active-category" value="All categories">All categories</button></li>',t.forEach(e=>{const o=document.createElement("option");o.value=e,o.textContent=e,m.appendChild(o);const s=document.createElement("li");s.classList.add("category-item");const n=document.createElement("button");n.value=e,n.textContent=e,n.classList.add("category-btn"),s.appendChild(n),b.appendChild(s)})}async function Q(t){C(),m.value=t,b.querySelectorAll(".category-btn").forEach(e=>e.classList.toggle("active-category",e.value===t));try{t==="All categories"?c=(await L()).flatMap(({books:o})=>o):c=await H(t),u=K(),I()}catch(e){console.error("Помилка при завантаженні книг:",e),g.innerHTML='<li class="no-books">Failed to load books</li>'}finally{f()}}m.addEventListener("change",t=>{const e=t.target.value;Q(e)});b.addEventListener("click",t=>{if(t.target.tagName!=="BUTTON")return;const e=t.target.value;Q(e)});d.addEventListener("click",()=>{u+=4,R(),d.blur()});function I(){u=K(),R(),ue.textContent=c.length,u>=c.length&&d.classList.add("btn-show-more-hidden"),u<c.length&&d.classList.remove("btn-show-more-hidden")}function R(){const t=c.slice(0,u);C(),requestAnimationFrame(()=>{setTimeout(()=>{if(t.length===0){g.innerHTML='<li class="no-books">No books found</li>',_.textContent=0,d.classList.add("btn-show-more-hidden"),f();return}g.innerHTML=be(t),_.textContent=Math.min(u,c.length),d.disabled=!1,u>=c.length?d.classList.add("btn-show-more-hidden"):d.classList.remove("btn-show-more-hidden"),f()},100)})}function K(){return window.innerWidth<768?10:24}window.addEventListener("resize",ge(()=>{const t=window.innerWidth<768?"mobile":"desktop";t!==D&&(D=t,I())},300));function ge(t,e){let o;return(...s)=>{clearTimeout(o),o=setTimeout(()=>t(...s),e)}}g.addEventListener("click",t=>{const e=t.target.closest(".btn-book");if(!e)return;const o=e.dataset.id;U(o)});m.addEventListener("focus",()=>{S.style.transform="translateY(-50%) rotate(180deg)"});m.addEventListener("blur",()=>{S.style.transform="translateY(-50%)"});m.addEventListener("change",()=>{S.style.transform="translateY(-50%)"});function be(t){return t.map(({title:e,author:o,book_image:s,price:n,_id:r})=>{let a;return typeof n=="string"&&n.trim()!=="0.00"?a=n.trim():typeof n=="number"?a=n.toFixed(2):a="9.99",`
    <li class="book-card">
      <img class="book-cover" src="${s}" alt="${e}" width="150" />
      <div class="book-card-info">
        <div class="book-card-descriptions">
          <h3 class="book-card-title">${e.toLowerCase()}</h3>
          <h4 class="book-card-author">${o}</h4>
        </div>
        <p class="book-price">$${a}</p>
      </div>
      <button type="button" class="btn-secondary btn-book" data-id="${r}">Learn more</button>
    </li>
  `}).join("")}const fe=document.querySelector(".slider-feedbacks"),ye=fe.querySelectorAll(".feedbacks-desktop-only");function G(){const t=window.innerWidth>=1440;ye.forEach(e=>{e.style.display=t?"block":"none"})}G();const ve=new Swiper(".slider-feedbacks",{slidesPerView:1,loop:!1,pagination:{el:".swiper-pagination-feedbacks",clickable:!0,renderBullet:(t,e)=>t>3?"":`<span class="${e}" tabindex="0"></span>`},navigation:{nextEl:".slider-navigation-feedbacks .swiper-button-next-feedbacks",prevEl:".slider-navigation-feedbacks .swiper-button-prev-feedbacks",disabledClass:"slider-button-disabled"},touchRatio:1,simulateTouch:!0,keyboard:{enabled:!0,onlyInViewport:!0},a11y:{enabled:!0,prevSlideMessage:"Попередній слайд",nextSlideMessage:"Наступний слайд",slideLabelMessage:"{{index}} з {{slidesLength}}",paginationBulletMessage:"Перейти до слайда {{index}}"},mousewheel:{invert:!1,sensitivity:1},breakpoints:{768:{slidesPerView:2},1440:{slidesPerView:3}}});let P=window.innerWidth>=1440;window.addEventListener("resize",()=>{const t=window.innerWidth>=1440;t!==P&&(G(),ve.update(),P=t)});document.querySelectorAll(".swiper-button-prev-feedbacks, .swiper-button-next-feedbacks").forEach(t=>t.addEventListener("mouseup",()=>t.blur()));let h=null;const we=document.querySelectorAll(".event-register-btn");function J(){const t=window.innerWidth;t<1440&&!h?h=new $(".swiper",{slidesPerView:1,spaceBetween:24,pagination:{el:".events-pagination",clickable:!0},navigation:{nextEl:".events-swiper-btn-next",prevEl:".events-swiper-btn-prev"},keyboard:{enabled:!0,onlyInViewport:!0},watchOverflow:!0,breakpoints:{768:{slidesPerView:2}}}):t>=1440&&h&&(h.destroy(!0,!0),h=null)}function ke(t,e){let o;return function(...s){clearTimeout(o),o=setTimeout(()=>t.apply(this,s),e)}}const Ee=ke(J,200);J();window.addEventListener("resize",Ee);we.forEach(t=>{t.addEventListener("click",()=>{const e=t.dataset.event||"book-registration";z(e)})});function Le(t=".scroll-top"){const e=document.querySelector(t);if(!e)return;const o=()=>{!(window.innerWidth<768)&&window.scrollY>300?e.classList.add("show"):e.classList.remove("show")},s=j(o,100);window.addEventListener("scroll",s,{passive:!0}),window.addEventListener("resize",o,{passive:!0}),window.addEventListener("orientationchange",o,{passive:!0}),e.addEventListener("click",()=>{window.scrollTo({top:0,behavior:"smooth"})}),o()}Le();se();
//# sourceMappingURL=index.js.map
