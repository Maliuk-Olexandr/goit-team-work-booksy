import{S as oe,a as ne,A as se,i as h}from"./assets/vendor-DlTilzpZ.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const d of r.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&n(d)}).observe(document,{childList:!0,subtree:!0});function o(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(s){if(s.ep)return;s.ep=!0;const r=o(s);fetch(s.href,r)}})();const i={mobMenu:document.querySelector(".mobile-menu"),body:document.body};let S=!1;const D=t=>{if(S)return;S=!0,i.mobMenu.classList.toggle("is-open",t),i.body.classList.toggle("no-scroll",t);const e=o=>{o.target===i.mobMenu&&(S=!1,i.mobMenu.removeEventListener("transitionend",e))};i.mobMenu.addEventListener("transitionend",e)};document.addEventListener("click",t=>{t.target.closest("[data-menu-open]")?D(!0):t.target.closest("[data-menu-close], .mobile-link")&&D(!1)});function re(t,e){let o;return(...n)=>{clearTimeout(o),o=setTimeout(()=>t(...n),e)}}function M({containerSelector:t,prevSelector:e,nextSelector:o,paginationSelector:n,customBullet:s,breakpoints:r,options:d={}}){const k=document.querySelector(t);if(!k)return console.warn(`Swiper контейнер ${t} не знайдено`),null;const l=e?document.querySelector(e):null,c=o?document.querySelector(o):null,b=n?document.querySelector(n):null;let _;b&&(_={el:b,clickable:!0},typeof s=="function"&&(_.renderBullet=s));const te=new oe(k,{loop:!1,slidesPerView:1,slidesPerGroup:1,parallax:!0,autoplay:{delay:1e4,disableOnInteraction:!0,pauseOnMouseEnter:!0},keyboard:{enabled:!0,onlyInViewport:!0},navigation:l&&c?{nextEl:c,prevEl:l}:void 0,...b&&{pagination:{el:b,clickable:!0,...typeof s=="function"&&{renderBullet:s}}},breakpoints:r,on:{init(a){x(a)},slideChange(a){x(a)}},...d});function x(a){!l||!c||(l.disabled=a.isBeginning,c.disabled=a.isEnd,l.classList.toggle("disabled",a.isBeginning),c.classList.toggle("disabled",a.isEnd))}return[l,c].forEach(a=>{a&&a.addEventListener("click",()=>{a.blur()})}),te}M({containerSelector:".swiper-hero",prevSelector:".hero-swiper-btn-prev",nextSelector:".hero-swiper-btn-next"});document.querySelectorAll('.slide-btn[href="#books"]').forEach(t=>{t.addEventListener("click",e=>{e.preventDefault(),document.querySelector("#books")?.scrollIntoView()})});const ie="https://books-backend.p.goit.global/books",ae=ne.create({baseURL:ie});async function L(t=""){try{const{data:e}=await ae.get(t);return e}catch(e){throw console.error("Error fetching data:",e.message),e}}async function le(){return(await L("/category-list")).map(e=>e.list_name)}async function U(){return(await L("/top-books")).map(o=>({...o,books:R(o.books)}))}async function ce(t){if(!t){const n=new Error("Valid category must be provided.");throw console.error(n),n}const e=await L(`/category?category=${t}`);return R(e)}function R(t){const e=new Set;return t.filter(o=>e.has(o.book_image)?!1:(e.add(o.book_image),!0))}async function de(t){if(!t){const e=new Error("Valid book ID must be provided.");throw console.error(e),e}return await L(`/${t}`)}Object.assign(i,{bookModal_img:document.querySelector(".modal-books_img"),bookModal_title:document.querySelector(".modal-books_title"),bookModal_author:document.querySelector(".modal-books_author"),bookModal_price:document.querySelector(".modal-books_price"),bookModal_details:document.querySelector('[data-ac="details"]'),bookModal_returns:document.querySelector('[data-ac="returns"]'),bookModal_shipping:document.querySelector('[data-ac="shipping"]'),bookModal_data:document.querySelector(".modal-books_data"),bookModal_quantity:document.querySelector("#bookQuantity")});function ue(t){i.bookModal_data.dataset.bookId=t.bookId,i.bookModal_img.src=t.bookPicture,i.bookModal_img.alt=t.bookTitle,i.bookModal_title.textContent=t.bookTitle,i.bookModal_quantity.value=t.bookQuantity,i.bookModal_author.textContent=t.bookAuthor,i.bookModal_price.textContent="$"+t.bookPrice,i.bookModal_details.textContent=t.details,i.bookModal_shipping.textContent=t.shipping,i.bookModal_returns.textContent=t.returns}const Y="shopping_cart";function me(t,e){if(!t||e<=0)return console.warn("Wrong parameters, can't add to cart"),!1;const o=Q(),n=o[t]||0;return o[t]=Number(n)+Number(e),pe(o)}function he(t){if(!t)return 0;const e=Q();return Number(e[t])||0}function Q(){try{const t=localStorage.getItem(Y);return t?JSON.parse(t):{}}catch(t){return console.error("Cart data getting error:",t),{}}}function pe(t){try{return localStorage.setItem(Y,JSON.stringify(t)),!0}catch(e){return console.error("Cart saving error:",e),!1}}const q={details:"I Will Find You is a gripping thriller by the master of suspense, Harlan Coben. The story follows David Burroughs, a former prisoner wrongfully convicted of murdering his own son. When he discovers a clue suggesting his son might still be alive, David escapes from prison to uncover the truth. Fast-paced, emotional, and full of unexpected twists — this novel will keep you hooked until the very last page.",shipping:"We ship across the United States within 2–5 business days. All orders are processed through USPS or a reliable courier service. Enjoy free standard shipping on orders over $50.",returns:"You can return an item within 14 days of receiving your order, provided it hasn’t been used and is in its original condition. To start a return, please contact our support team — we’ll guide you through the process quickly and hassle-free."},$=new se(document.querySelector(".accordion-container"),{showMultiple:!0,duration:400,collapse:!0});class K{constructor(e){if(!e)throw new Error("Modal Element not found");this.modalElement=e,this.escapeHandler=this.handleEscape.bind(this),this.closeClickHandler=this.handleCloseClick.bind(this)}trapFocusHandler=e=>{if(e.key!=="Tab")return;const o=e.shiftKey,n=document.activeElement;o&&n===this.firstFocusableElement?(e.preventDefault(),this.lastFocusableElement.focus()):!o&&n===this.lastFocusableElement&&(e.preventDefault(),this.firstFocusableElement.focus())};open(){this.modalElement.classList.add("is-open"),document.body.style.overflow="hidden";const e='a[href], button:not([disabled]), textarea:not([disabled]), input:not([disabled]), select:not([disabled]), [tabindex]:not([tabindex="-1"])';this.focuableElements=this.modalElement.querySelectorAll(e),this.firstFocusableElement=this.focuableElements[0],this.lastFocusableElement=this.focuableElements[this.focuableElements.length-1],this.firstFocusableElement?.focus(),document.addEventListener("keydown",this.trapFocusHandler),document.addEventListener("keydown",this.escapeHandler),this.modalElement.addEventListener("click",this.closeClickHandler)}close(){this.modalElement.classList.remove("is-open"),document.body.style.overflow="",document.removeEventListener("keydown",this.trapFocusHandler),document.removeEventListener("keydown",this.escapeHandler),this.modalElement.removeEventListener("click",this.closeClickHandler)}handleEscape(e){e.key==="Escape"&&this.close()}handleCloseClick(e){const o=this.modalElement.querySelector(".modal_close-btn"),n=o&&o.contains(e.target),s=e.target===this.modalElement;(n||s)&&this.close()}}class fe extends K{constructor(e){if(super(e),this.form=this.modalElement.querySelector("#contactForm"),this.nameInput=this.form.querySelector("#user_name"),this.emailInput=this.form.querySelector("#user_email"),this.messageInput=this.form.querySelector("#user_message"),this.nameErrorContainer=this.form.querySelector(".contact-form-name .validation-error"),this.emailErrorContainer=this.form.querySelector(".contact-form-email .validation-error"),this.messageErrorContainer=this.form.querySelector(".contact-form-message .validation-error"),!this.form)throw new Error("Contact form not found in the modal");this.submitHandler=this.handleSubmit.bind(this),this.handleNameInput=this.clearErrorContainer.bind(this,this.nameInput,this.nameErrorContainer),this.handleEmailInput=this.clearErrorContainer.bind(this,this.emailInput,this.emailErrorContainer),this.handleMessageInput=this.clearErrorContainer.bind(this,this.messageInput,this.messageErrorContainer)}clearErrorContainer(e,o){e.classList.remove("invalid"),o.innerText=""}open(){super.open(),this.form.addEventListener("submit",this.submitHandler),this.nameInput.addEventListener("focus",this.handleNameInput),this.emailInput.addEventListener("focus",this.handleEmailInput),this.messageInput.addEventListener("focus",this.handleMessageInput)}close(){super.close(),this.form.removeEventListener("submit",this.submitHandler),this.nameInput.removeEventListener("focus",this.handleNameInput),this.emailInput.removeEventListener("focus",this.handleEmailInput),this.messageInput.removeEventListener("focus",this.handleMessageInput),this.form.reset()}validate(){const e=[],o={name:"❌ Please enter valid Name",email:{valid:"❌ Please enter valid Email",required:"❌ Email is a required field"},message:"❌ Message can not be empty"};this.nameInput.classList.remove("invalid"),this.emailInput.classList.remove("invalid"),this.messageInput.classList.remove("invalid"),this.nameInput.value.trim()===""&&(e.push(o.name),this.nameInput.classList.add("invalid"),this.nameErrorContainer.innerText=o.name);const n=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;return this.emailInput.value.trim()===""?(e.push(o.email.required),this.emailInput.classList.add("invalid"),this.emailErrorContainer.innerText=o.email.required):n.test(this.emailInput.value)||(e.push(o.email.valid),this.emailInput.classList.add("invalid"),this.emailErrorContainer.innerText=o.email.valid),this.messageInput.value.trim()===""&&(e.push(o.message),this.messageInput.classList.add("invalid"),this.messageErrorContainer.innerText=o.message),e}async handleSubmit(e){e.preventDefault();const o=new FormData(this.form),n=Object.fromEntries(o.entries());if(!(this.validate().length>0))try{await this.submitForm(n),h.show({position:"center",theme:"light",message:"❤︎ Your registration has been submitted."}),this.close()}catch(r){console.error("Form submission error:",r),h.show({position:"center",theme:"light",message:"✖ 'There was an error submitting your registration. Please try again.'"})}}async submitForm(e){console.log("Submitting form data:",e)}}class be extends K{constructor(e){super(e),this.eventHandler=this.handleEvents.bind(this)}async open(e){try{const o=await de(e),n=this.prepareData(o);ue(n),$&&$.closeAll(),super.open(),this.form=this.modalElement.querySelector("#bookModalActionForm"),this.form&&(this.form.addEventListener("click",this.eventHandler),this.form.addEventListener("submit",this.eventHandler))}catch(o){console.error(`Error loading book with ID ${e}:`,o),h.show({position:"center",theme:"light",message:"✖ 'Sorry, couldn't load the book details. Please try again later.'"})}}close(){super.close(),this.form&&(this.form.removeEventListener("click",this.eventHandler),this.form.removeEventListener("submit",this.eventHandler))}prepareData(e){return{bookId:e._id,bookPicture:e.book_image,bookTitle:e.title,bookAuthor:e.author,bookPrice:Number(e.price)||"9.99",bookQuantity:1,details:e.details||q.details,shipping:e.shipping||q.shipping,returns:e.returns||q.returns}}handleEvents(e){e.preventDefault();const o=e.target;switch(o.dataset.action){case"decrease":this.updateQuantity(-1);break;case"increase":this.updateQuantity(1);break;case"add-to-cart":this.handleAddToCart(o);break;case"buy-now":this.handleBuyNow();break}e.type==="submit"&&this.handleBuyNow()}updateQuantity(e){const o=this.form.querySelector(".quantity-input"),s=parseInt(o.value)+e;s>=1&&(o.value=s)}handleAddToCart(e){const n=e.closest("[data-book-id]").dataset.bookId,s=parseInt(this.form.querySelector(".quantity-input").value);h.show({iconUrl:"/img/icons.svg",theme:"light",progressBar:!0,message:`Book (${s} pcs) added`,target:".modal-books_message-container",timeout:3e3,onOpening:function(r,d){F(d,"/img/icons.svg#icon-shopping-basket")}}),console.log(`Book with ID '${n}' (qty: ${s}) added to Cart.`),console.log(`Total ID '${n}' in Cart: ${he(n)}`),me(n,s)}handleBuyNow(){console.log('"Buy Now" clicked.'),h.show({iconUrl:"/img/icons.svg",position:"center",theme:"light",message:"Thanks for buying!",timeout:3e3,onOpening:function(e,o){F(o,"/img/icons.svg#icon-shopping-basket")}}),this.close()}}function F(t,e){const o=t.querySelector(".iziToast-icon");if(o){const n=document.createElementNS("http://www.w3.org/2000/svg","svg");n.setAttribute("class",`${o.getAttribute("class")} revealIn customIziToastIcon`),n.setAttribute("width","24"),n.setAttribute("height","24");const s=document.createElementNS("http://www.w3.org/2000/svg","use");s.setAttributeNS("http://www.w3.org/1999/xlink","href",e),n.appendChild(s),o.parentNode.replaceChild(n,o)}}const H=document.querySelector(".modal-contacts"),N=document.querySelector(".modal-books");let C,I;H&&(C=new fe(H));N&&(I=new be(N));function ge(t="Children’s Story Hour"){C?(document.querySelector("#modalDesc").textContent=t,C.open()):console.error("Contact modal is not initialized.")}function ye(t="660df41ba957e5c1ae0f519e"){I?I.open(t):console.error("Books modal is not initialized.")}const w=document.querySelector(".gallery"),f=document.querySelector("#category-select"),m=document.querySelector(".btn-show-more"),P=document.querySelector(".visible-books"),ve=document.querySelector(".total-books"),y=document.querySelector(".categories-list"),B=document.querySelector(".categories-arrow"),J=document.querySelector(".loader");let u=[],p=0;function T(){J.classList.remove("hidden")}function E(){J.classList.add("hidden")}let O=window.innerWidth<768?"mobile":"desktop";T();const ke=await le();Ee(ke);const we=await U();u=we.flatMap(({books:t})=>t);A();E();function Ee(t){f.innerHTML='<option selected value="All categories">All categories</option>',y.innerHTML='<li><button class="category-btn active-category" value="All categories">All categories</button></li>',t.forEach(e=>{const o=document.createElement("option");o.value=e,o.textContent=e,f.appendChild(o);const n=document.createElement("li");n.classList.add("category-item");const s=document.createElement("button");s.value=e,s.textContent=e,s.classList.add("category-btn"),n.appendChild(s),y.appendChild(n)})}async function G(t){T(),f.value=t,y.querySelectorAll(".category-btn").forEach(e=>e.classList.toggle("active-category",e.value===t));try{t==="All categories"?u=(await U()).flatMap(({books:o})=>o):u=await ce(t),p=Z(),A()}catch(e){console.error("Помилка при завантаженні книг:",e),w.innerHTML='<li class="no-books">Failed to load books</li>'}finally{E()}}f.addEventListener("change",t=>{const e=t.target.value;G(e)});y.addEventListener("click",t=>{t.preventDefault();const e=t.target.closest(".category-btn");if(!e)return;y.querySelectorAll(".category-btn").forEach(n=>{n.classList.remove("active-category"),n.setAttribute("aria-pressed","false")}),e.classList.add("active-category"),e.setAttribute("aria-pressed","true");const o=e.value;G(o)});m.addEventListener("click",()=>{p+=4,X(),m.blur()});function A(){p=Z(),X(),ve.textContent=u.length,p>=u.length&&m.classList.add("btn-show-more-hidden"),p<u.length&&m.classList.remove("btn-show-more-hidden")}function X(){const t=u.slice(0,p);T(),requestAnimationFrame(()=>{setTimeout(()=>{if(t.length===0){w.innerHTML='<li class="no-books">No books found</li>',P.textContent=0,m.classList.add("btn-show-more-hidden"),E();return}w.innerHTML=Se(t),P.textContent=Math.min(p,u.length),m.disabled=!1,p>=u.length?m.classList.add("btn-show-more-hidden"):m.classList.remove("btn-show-more-hidden"),E()},100)})}function Z(){return window.innerWidth<768?10:24}window.addEventListener("resize",Le(()=>{const t=window.innerWidth<768?"mobile":"desktop";t!==O&&(O=t,A())},300));function Le(t,e){let o;return(...n)=>{clearTimeout(o),o=setTimeout(()=>t(...n),e)}}w.addEventListener("click",t=>{const e=t.target.closest(".btn-book");if(!e)return;const o=e.dataset.id;ye(o)});let v=!1;f.addEventListener("mousedown",()=>{B.style.transform="translateY(-50%) rotate(180deg)",v=!0});f.addEventListener("change",()=>{v&&(B.style.transform="translateY(-50%)",v=!1)});document.addEventListener("click",t=>{v&&!f.contains(t.target)&&(B.style.transform="translateY(-50%)",v=!1)});function Se(t){return t.map(({title:e,author:o,book_image:n,price:s,_id:r},d)=>{const k=typeof s=="number"?s.toFixed(2):typeof s=="string"&&s.trim()!=="0.00"?s.trim():"9.99",l=V(e),c=V(o);return`
        <li class="book-card">
          <img
           loading="${d<3?"eager":"lazy"}"
            class="book-cover"
            src="${n}"
            alt="Book cover: ${l} by ${c}"
            width="150"
            height="auto"
          />
          <div class="book-card-info">
            <div class="book-card-descriptions">
              <h3 class="book-card-title">${l.toLowerCase()}</h3>
              <h4 class="book-card-author">${c}</h4>
            </div>
            <p class="book-price">$${k}</p>
          </div>
          <button
            type="button"
            class="btn-secondary btn-book"
            data-id="${r}"
            aria-label="Learn more about ${l} by ${c}"
          >
            Learn more
          </button>
        </li>`}).join("")}function V(t=""){const e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"};return t.replace(/[&<>"']/g,o=>e[o])}const qe=M({containerSelector:".slider-feedbacks",prevSelector:".swiper-button-prev-feedbacks",nextSelector:".swiper-button-next-feedbacks",paginationSelector:".swiper-pagination-feedbacks",customBullet:(t,e)=>t>3?"":`<span class="${e}" tabindex="0"></span>`,breakpoints:{320:{slidesPerView:1,spaceBetween:24},768:{slidesPerView:2,spaceBetween:24},1440:{slidesPerView:3,spaceBetween:24}},options:{a11y:{enabled:!0,prevSlideMessage:"Попередній слайд",nextSlideMessage:"Наступний слайд",slideLabelMessage:"{{index}} з {{slidesLength}}",paginationBulletMessage:"Перейти до слайда {{index}}"}}}),Ce=document.querySelector(".slider-feedbacks"),Ie=Ce?.querySelectorAll(".feedbacks-desktop-only")??[];function j(){const t=window.innerWidth>=1440;Ie.forEach(e=>{e.style.display=t?"block":"none"})}j();let W=window.innerWidth>=1440;window.addEventListener("resize",()=>{const t=window.innerWidth>=1440;t!==W&&(j(),qe?.update(),W=t)});let g=null;const Me=document.querySelectorAll(".event-register-btn");function ee(){const t=window.innerWidth;t<1440&&!g?g=M({containerSelector:".events-swiper",prevSelector:".events-swiper-btn-prev",nextSelector:".events-swiper-btn-next",paginationSelector:".events-pagination",breakpoints:{768:{slidesPerView:2}},options:{spaceBetween:24,keyboard:{enabled:!0,onlyInViewport:!0},watchOverflow:!0}}):t>=1440&&g&&(g.destroy(!0,!0),g=null)}function Be(t,e){let o;return function(...n){clearTimeout(o),o=setTimeout(()=>t.apply(this,n),e)}}const Te=Be(ee,200);ee();window.addEventListener("resize",Te);Me.forEach(t=>{t.addEventListener("click",()=>{const e=t.dataset.event||"book-registration";ge(e)})});const Ae=document.querySelector(".form-footer"),z=document.querySelector(".email-input");Ae.addEventListener("submit",function(t){t.preventDefault();const e=z.value.trim();if(!_e(e)){h.error({title:"Error",message:"Please enter a valid email address.",position:"topRight",timeout:3e3});return}fetch("https://jsonplaceholder.typicode.com/posts",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e})}).then(o=>{if(!o.ok)throw new Error("Network response was not ok");return o.json()}).then(o=>{h.success({title:"Success",message:"Thank you for subscribing!",position:"topRight",timeout:3e3}),z.value=""}).catch(o=>{h.error({title:"Error",message:"There was an error processing your request. Please try again later.",position:"topRight",timeout:3e3})})});function _e(t){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)}function xe(t=".scroll-top"){const e=document.querySelector(t);if(!e)return;const o=()=>{!(window.innerWidth<768)&&window.scrollY>300?e.classList.add("show"):e.classList.remove("show")},n=re(o,100);window.addEventListener("scroll",n,{passive:!0}),window.addEventListener("resize",o,{passive:!0}),window.addEventListener("orientationchange",o,{passive:!0}),e.addEventListener("click",()=>{window.scrollTo({top:0,behavior:"smooth"})}),o()}xe();
//# sourceMappingURL=index.js.map
