{"version":3,"file":"index.js","sources":["../src/js/refs.js","../src/js/header.js","../src/js/render-function.js","../src/js/products-api.js","../src/js/storage.js","../src/js/modal.js","../src/main.js"],"sourcesContent":["//Обʼєкт з посиланнями на ДОМ елементи\n\nconst refs = {\n  mobMenu: document.querySelector('.mobile-menu'),  // мобільне меню в хедері\n  body: document.body,                              // тіло документа\n};\n\nexport default refs;\n\n\n\n","import refs from './refs';\n\nlet isAnimationInProgress = false;\n\nconst toggleMobMenu = open => {\n  if (isAnimationInProgress) return;\n\n  isAnimationInProgress = true;\n  refs.mobMenu.classList.toggle('is-open', open);\n  refs.body.classList.toggle('no-scroll', open);\n\n  // Додаємо слухача на завершення transition тільки один раз\n  const onTransitionEnd = event => {\n    if (event.target === refs.mobMenu) {\n      isAnimationInProgress = false;\n      refs.mobMenu.removeEventListener('transitionend', onTransitionEnd);\n    }\n  };\n\n  refs.mobMenu.addEventListener('transitionend', onTransitionEnd);\n};\n\ndocument.addEventListener('click', e => {\n  if (e.target.closest('[data-menu-open]')) {\n    toggleMobMenu(true);\n  } else if (e.target.closest('[data-menu-close], .mobile-link')) {\n    toggleMobMenu(false);\n  }\n});","//Функцію для створення, рендеру або видалення розмітки\n\n//#region Book Modal Render\nexport function renderBookModal(reference, dataObj) {\n  const markup = bookModalMarkup(dataObj);\n  reference.querySelector('.modal-content').innerHTML = markup;\n}\n\nfunction bookModalMarkup(obj) {\n  const {\n    bookId,\n    bookPicture,\n    bookTitle,\n    bookAuthor,\n    bookPrice,\n    bookQuantity,\n    details,\n    shipping,\n    returns,\n  } = obj;\n\n  return `      \n      <button class=\"modal_close-btn\">\n        <svg>\n          <use xlink:href=\"/img/icons.svg#icon-close\"></use>\n        </svg>\n      </button>\n        <picture class=\"modal-books_picture\" id=\"bookPicture\">\n        <img\n          class=\"modal-books_img\"\n          src=\"${bookPicture}\"\n          alt=\"\"\n        />\n      </picture>\n      <div class=\"modal-books_data\"\n        data-book-id=\"${bookId}\"\n        data-book-price=\"${bookPrice}\"\n        data-book-title=\"${bookTitle}\"\n      >\n        <h2 class=\"modal-books_title\">${bookTitle}</h2>\n        <p class=\"modal-books_author\">${bookAuthor}</p>\n        <p class=\"modal-books_price\">$${bookPrice}</p>\n\n        <form class=\"book-action-form\" id=\"bookModalActionForm\">\n          <div class=\"modal-books_quantity-container\"\n            data-min-quantity=\"1\" \n            data-max-quantity=\"999\" \n            data-step=\"1\"\n          >\n            <button class=\"btn btn-secondary\"\n              type=\"button\"\n              class=\"btn btn-secondary\"\n              data-action=\"decrease\"\n            >-</button>\n            <input\n              class=\"quantity-input\"\n              id=\"bookQuantity\"\n              value=\"${bookQuantity}\"\n              min=\"1\"\n            />\n            <button class=\"btn btn-secondary\"\n              type=\"button\"\n              class=\"btn btn-secondary\"\n              data-action=\"increase\"\n            >+</button>\n          </div>\n          <div class=\"modal-books_buttons-container\">\n            <button \n              class=\"btn\"\n              type=\"button\"\n              data-action=\"add-to-cart\"\n            >Add To Cart</button>\n            <button\n              type=\"submit\"\n              class=\"btn btn-secondary\"\n              data-action=\"buy-now\"\n            >Buy Now</button>\n          </div>\n        </form>\n\n        <div class=\"accordion-container\">\n          <div class=\"ac\">\n            <h2 class=\"ac-header\">\n              <button type=\"button\" class=\"ac-trigger\">\n                Details\n                <svg class=\"chevron-icon\">\n                  <use xlink:href=\"/img/icons.svg#icon-chevron-up\"></use>\n                </svg>\n              </button>\n            </h2>\n            <div class=\"ac-panel\">\n              <p class=\"ac-text\">${details}</p>\n            </div>\n          </div>\n\n          <div class=\"ac\">\n            <h2 class=\"ac-header\">\n              <button type=\"button\" class=\"ac-trigger\">\n                Shipping<svg class=\"chevron-icon\">\n                  <use xlink:href=\"/img/icons.svg#icon-chevron-up\"></use>\n                </svg>\n              </button>\n            </h2>\n            <div class=\"ac-panel\">\n              <p class=\"ac-text\">${shipping}</p>\n            </div>\n          </div>\n\n          <div class=\"ac\">\n            <h2 class=\"ac-header\">\n              <button type=\"button\" class=\"ac-trigger\">\n                Returns<svg class=\"chevron-icon\">\n                  <use xlink:href=\"/img/icons.svg#icon-chevron-up\"></use>\n                </svg>\n              </button>\n            </h2>\n            <div class=\"ac-panel\">\n              <p class=\"ac-text\">${returns}</p>\n            </div>\n          </div>\n        </div>\n      </div>`;\n}\n//#endregion Book Modal Render\n","import axios from 'axios';\n\nconst BASE_URL = 'https://books-backend.p.goit.global/books';\n\n/**\n * Helper function to make API requests to the base URL.\n * Handles basic error logging.\n * @param {string} url - The endpoint URL relative to BASE_URL.\n * @returns {Promise<Object|Array>} - The data returned from the API.\n */\nasync function fetchURL(url = '') {\n  try {\n    const { data } = await axios.get(BASE_URL + url);\n    return data;\n  } catch (error) {\n    console.error('Error fetching data:', error.message);\n    throw error;\n  }\n}\n\n/**\n * Fetches the list of book categories from the API\n * @returns {Promise<Array>} Array of category names (list_name property from each category object)\n */\nexport async function GetCategoryList() {\n  const list = await fetchURL('/category-list');\n  return list.map(e => e.list_name);\n}\n\n/**\n * Fetches the list of top 5 books in each categorie from the API\n * @returns {Promise<Object>} Object of book categories, each containing details about the 5 books within that category\n */\nexport async function getTopBooks() {\n  return await fetchURL(`/top-books`);\n}\n\n/**\n * Fetches the list books in certain categorie from the API\n * @param {string} category - The name of the category to fetch books for.\n * @returns {Promise<Object>} Object of books in that category\n */\nexport async function getBooksByCategory(category) {\n  return await fetchURL(`/category?category=${category}`);\n}\n\n/**\n * Fetches the list of book details by ID from the API\n * @param {string} id - The unique ID of the book.\n * @returns {Promise<Object>} An object containing the book's details.\n */\nexport async function getBookByID(id) {\n  return await fetchURL(`/${id}`);\n}\n\n// start TODO: Remove this test code before production deployment.\nexport async function testAPI() {\n  try {\n    const catList = await GetCategoryList();\n    const topBooks = await getTopBooks();\n    const booksByCategory = await getBooksByCategory(catList[0]);\n    const id = booksByCategory[0]._id;\n    console.log('\\x1b[32mtestAPI() start ------------\\x1b[0m');\n    console.log('GetCategoryList():', catList);\n    console.log('getTopBooks():', topBooks);\n    console.log(`getBooksByCategory('${catList[0]}'):`, booksByCategory);\n    console.log(`getBookByID(\"${id}\"):`, await getBookByID(id));\n    console.log('\\x1b[32mtestAPI() end ------------\\x1b[0m');\n  } catch (error) {\n    console.error('API test failed:', error);\n  }\n}\n// end TODO: Remove this test code before production deployment.\n","// Функції для роботи з localStorage\n\nconst CART_STORAGE_KEY = 'shopping_cart';\n\n/**\n * Adds a book to the shopping cart or increases its quantity if already exists\n * @param {string} bookID - Unique identifier of the book\n * @param {number} bookQuantity - Quantity of books to add (must be positive)\n * @returns {boolean} True if successfully added to cart, false otherwise\n * @example\n * // Add 2 copies of book with ID \"xyz\"\n * addToCart(\"xyz\", 2);\n */\nexport function addToCart(bookID, bookQuantity) {\n  if (!bookID || bookQuantity <= 0) {\n    console.warn(\"Wrong parameters, can't add to cart\");\n    return false;\n  }\n\n  const cart = getFullCart();\n  const currentQuantity = cart[bookID] || 0;\n\n  cart[bookID] = Number(currentQuantity) + Number(bookQuantity);\n\n  return saveCart(cart);\n}\n\n/**\n * Removes a specific book from the shopping cart completely\n * @param {string} bookID - Unique identifier of the book to remove\n * @returns {boolean} True if successfully removed, false if bookID is invalid or save failed\n * @example\n * // Remove book with ID \"123\" from cart\n * removeFromCart(\"123\");\n */\nexport function removeFromCart(bookID) {\n  if (!bookID) return false;\n\n  const cart = getFullCart();\n  delete cart[bookID];\n\n  return saveCart(cart);\n}\n\n/**\n * Clears all items from the shopping cart\n * @returns {boolean} True if successfully cleared, false otherwise\n * @example\n * // Remove all items from cart\n * clearCart();\n */\nexport function clearCart() {\n  return saveCart({});\n}\n\n/**\n * Gets the quantity of a specific book in the cart\n * @param {string} bookID - Unique identifier of the book\n * @returns {number} Quantity of the book in cart (0 if not found)\n * @example\n * // Get quantity of book with ID \"123\"\n * getFromCartByID(\"123\");\n */\nexport function getFromCartByID(bookID) {\n  if (!bookID) return 0;\n\n  const cart = getFullCart();\n  return Number(cart[bookID]) || 0;\n}\n\n/**\n * Retrieves the entire shopping cart from localStorage\n * @returns {Object} Cart object with bookID as keys and quantities as values\n * @example\n * // Returns object like: { \"id123\": 2, \"id456\": 1 }\n * const cart = getFullCart();\n */\nexport function getFullCart() {\n  try {\n    const cartData = localStorage.getItem(CART_STORAGE_KEY);\n    return cartData ? JSON.parse(cartData) : {};\n  } catch (error) {\n    console.error('Cart data getting error:', error);\n    return {};\n  }\n}\n\n/**\n * Saves the entire cart object to localStorage\n * @param {Object} cart - Cart object with bookID as keys and quantities as values\n * @returns {boolean} True if successfully saved, false if error occurred\n * @private\n */\nfunction saveCart(cart) {\n  try {\n    localStorage.setItem(CART_STORAGE_KEY, JSON.stringify(cart));\n    return true;\n  } catch (error) {\n    console.error('Cart saving error:', error);\n    return false;\n  }\n}\n","//Описана робота модалки - відкриття закриття і все що з модалкою повʼязано\nimport Accordion from 'accordion-js';\nimport 'accordion-js/dist/accordion.min.css';\nimport { renderBookModal } from './render-function';\nimport { getBookByID } from './products-api';\nimport { addToCart, getFromCartByID } from './storage';\n\nconst refs = {\n  modalBooks: document.querySelector('.modal-books'),\n  modalContacts: document.querySelector('.modal-contacts'),\n};\n\nfunction openModal(reference) {\n  if (!reference) {\n    console.error('Modal reference is not found');\n    return;\n  }\n\n  if (reference.escapeHandler) {\n    document.removeEventListener('keydown', reference.escapeHandler);\n    reference.removeEventListener('click', handleModalCloseClick);\n  }\n\n  // Створюю функцію з замиканням і зберігаю в DOM елементі який отримую як параметр\n  reference.escapeHandler = event => {\n    if (event.key === 'Escape') closeModal(reference);\n  };\n\n  // Додаю обробники подій\n  document.addEventListener('keydown', reference.escapeHandler);\n  reference.addEventListener('click', handleModalCloseClick);\n\n  // Відкриваю модальне вікно\n  reference.classList.add('is-open');\n\n  // Виключаю скрол під модалкою\n  document.body.style.overflow = 'hidden';\n}\n\nfunction closeModal(reference) {\n  if (!reference) {\n    console.error('Modal reference is not found');\n    return;\n  }\n\n  // Видаляю обробники подій\n  reference.removeEventListener('click', handleModalCloseClick);\n  document.removeEventListener('keydown', reference.escapeHandler);\n\n  const form = document.getElementById('bookModalActionForm');\n  if (form) {\n    form.removeEventListener('submit', handleFormSubmit);\n    form.removeEventListener('click', handleBooksModalButtons);\n  }\n\n  // Закриваю модальне вікно\n  reference.classList.remove('is-open');\n\n  // Включаю скрол під модалкою\n  document.body.style.overflow = '';\n}\n\nfunction handleModalCloseClick(event) {\n  const currentModal = event.currentTarget;\n  const closeBtn = currentModal.querySelector('.modal_close-btn');\n  const closeBtnClick = closeBtn.contains(event.target);\n  const overlayClick = event.target === currentModal;\n\n  if (closeBtnClick || overlayClick) closeModal(currentModal);\n}\n\nclass ContactForm {\n  constructor(formId) {\n    this.form = document.getElementById(formId);\n    this.submitBtn = this.form.querySelector('#submitBtn');\n    this.form.addEventListener('submit', event => {\n      event.preventDefault();\n      this.handleSubmit();\n    });\n  }\n\n  getFormData() {\n    const formData = new FormData(this.form);\n    const data = {};\n\n    for (let [key, value] of formData.entries()) {\n      data[key] = value.trim();\n    }\n\n    return data;\n  }\n\n  showSuccess(message) {\n    console.log(message);\n  }\n\n  resetForm() {\n    this.form.reset();\n  }\n\n  async handleSubmit() {\n    const formData = this.getFormData();\n\n    try {\n      await this.submitForm(formData);\n      this.showSuccess('Your registration has been submitted.');\n      this.resetForm();\n    } catch (error) {\n      console.error('Form submission error:', error);\n    }\n  }\n\n  async submitForm(data) {\n    console.log('Form data:', data);\n  }\n}\n\nexport function openContactsModal(obj) {\n  openModal(refs.modalContacts);\n  const contactForm = new ContactForm('contactForm');\n}\n\n/**\n * Opens a modal displaying book information.\n * @param {string} bookId - book id.\n */\nexport async function openBooksModal(bookId = '660df41ba957e5c1ae0f519e') {\n  try {\n    const responce = await getBookByID(bookId);\n    const dataObj = {\n      bookId: responce._id,\n      bookPicture: responce.book_image,\n      bookTitle: responce.title,\n      bookAuthor: responce.author,\n      bookPrice: responce.price,\n      bookQuantity: 1,\n      details:\n        responce.details ||\n        `I Will Find You is a gripping thriller by the master of\n                suspense, Harlan Coben. The story follows David Burroughs, a\n                former prisoner wrongfully convicted of murdering his own son.\n                When he discovers a clue suggesting his son might still be\n                alive, David escapes from prison to uncover the truth.\n                Fast-paced, emotional, and full of unexpected twists — this\n                novel will keep you hooked until the very last page.`, //@TODO teamlid/mentor ansver\n      shipping:\n        responce.shipping ||\n        `We ship across the United States within 2–5 business days. All\n                orders are processed through USPS or a reliable courier service.\n                Enjoy free standard shipping on orders over $50.`, //@TODO teamlid/mentor ansver\n      returns:\n        responce.returns ||\n        `You can return an item within 14 days of receiving your order,\n                provided it hasn’t been used and is in its original condition.\n                To start a return, please contact our support team — we’ll guide\n                you through the process quickly and hassle-free.`, //@TODO teamlid/mentor ansver\n    };\n\n    openModal(refs.modalBooks);\n    renderBookModal(refs.modalBooks, dataObj);\n    new Accordion(\n      refs.modalBooks.querySelector('.modal-books .accordion-container'),\n      {\n        showMultiple: true,\n        duration: 400,\n        collapse: true,\n      }\n    );\n\n    const form = document.getElementById('bookModalActionForm');\n    if (!form) {\n      console.error('Form bookModalActionForm not found');\n      return;\n    }\n\n    form.addEventListener('submit', handleFormSubmit);\n    form.addEventListener('click', handleBooksModalButtons);\n  } catch (error) {\n    console.error('Error loading  with getBookByID:', error);\n  }\n}\n\n//#region books modal logic\nfunction handleFormSubmit(event) {\n  event.preventDefault();\n  handleBuyNow();\n}\n\nfunction handleBooksModalButtons(event) {\n  const action = event.target.dataset.action;\n\n  switch (action) {\n    case 'decrease':\n      handleQuantityDecrease(event.target);\n      break;\n    case 'increase':\n      handleQuantityIncrease(event.target);\n      break;\n    case 'add-to-cart':\n      handleAddToCart(event.target);\n      break;\n  }\n}\n\nfunction handleQuantityDecrease(button) {\n  const container = button.closest('[data-min-quantity]');\n  const input = container.querySelector('.quantity-input');\n  const minQuantity = parseInt(container.dataset.minQuantity);\n  const currentValue = parseInt(input.value);\n\n  if (currentValue > minQuantity) input.value = currentValue - 1;\n}\n\nfunction handleQuantityIncrease(button) {\n  const container = button.closest('[data-max-quantity]');\n  const input = container.querySelector('.quantity-input');\n  const maxQuantity = parseInt(container.dataset.maxQuantity);\n  const currentValue = parseInt(input.value);\n\n  if (currentValue < maxQuantity) input.value = currentValue + 1;\n}\n\nfunction handleAddToCart(button) {\n  const modalData = button.closest('[data-book-id]');\n  const bookId = modalData.dataset.bookId;\n  const quantity = parseInt(modalData.querySelector('.quantity-input').value);\n\n  addToCart(bookId, quantity);\n\n  console.log(`Book with ID'${bookId}' in q-ty '${quantity}' added to Cart`);\n  console.log(`Total ID'${bookId}' in Cart ${getFromCartByID(bookId)}`);\n}\n\nfunction handleBuyNow() {\n  console.log('Thanks for bying');\n}\n//#endregion books modal logic\n\n//#region @TODO delete before deployment\nwindow.openBooksModal = openBooksModal;\n// openBooksModal();\nwindow.openContactsModal = openContactsModal;\n//#endregion @TODO delete before deployment\n","import './js/header.js';\nimport './js/hero.js';\nimport './js/books.js';\nimport './js/feedback.js';\nimport './js/events.js';\nimport './js/footer.js';\nimport './js/modal.js';\n\n// @TODO remove before production deployment\nimport { testAPI } from './js/products-api.js';\ntestAPI();\n// @TODO remove before production deployment\n"],"names":["refs","isAnimationInProgress","toggleMobMenu","open","onTransitionEnd","event","e","renderBookModal","reference","dataObj","markup","bookModalMarkup","obj","bookId","bookPicture","bookTitle","bookAuthor","bookPrice","bookQuantity","details","shipping","returns","BASE_URL","fetchURL","url","data","axios","error","GetCategoryList","getTopBooks","getBooksByCategory","category","getBookByID","id","testAPI","catList","topBooks","booksByCategory","CART_STORAGE_KEY","addToCart","bookID","cart","getFullCart","currentQuantity","saveCart","getFromCartByID","cartData","openModal","handleModalCloseClick","closeModal","form","handleFormSubmit","handleBooksModalButtons","currentModal","closeBtnClick","overlayClick","ContactForm","formId","formData","key","value","message","openContactsModal","openBooksModal","responce","Accordion","handleBuyNow","handleQuantityDecrease","handleQuantityIncrease","handleAddToCart","button","container","input","minQuantity","currentValue","maxQuantity","modalData","quantity"],"mappings":"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"}